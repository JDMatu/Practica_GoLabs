{% extends 'base.html' %}
{% block content %}

<section class="my-5">
    <div class="container">
        <h2 class="text-center fs-1 mb-4" style="color: rgb(35, 197, 27);">Mi Recetario</h2>
        <div class="row g-4">
            {% if recetas %}
                {% for receta in recetas %}
                    <div class="col-12 col-md-6 col-lg-4 d-flex align-items-stretch">
                        <div class="card p-4 w-100">
                            <div class="recipe-card">
                                <div class="recipe-card-body">
                                    <h5 class="text-center">{{receta[1]}}</h5>
                                    <hr>
                                    <b>Ingredientes:</b>
                                    <ul>
                                        {% for ingrediente in receta[2].split('\n') %}
                                        <li>{{ ingrediente }}</li>
                                    {% endfor %}
                                    </ul>
                                </div>
                                <div class="recipe-card-footer">
                                    <button type="button" class="btn btn-success w-100" data-bs-toggle="modal" data-bs-target="#modalReceta{{ receta[0] }}">
                                        Preparación
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal para el procedimiento de cada receta -->
                    <div class="modal fade" id="modalReceta{{ receta[0] }}" tabindex="-1" aria-labelledby="modalRecetaLabel{{ receta[0] }}" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalRecetaLabel{{ receta[0] }}">{{ receta[1] }} - Preparación</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>{{ receta[3] | replace('\n', '<br>') | safe }}</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                {% endfor %}
            {% else %}
            <div class="alert alert-warning d-flex gap-4" role="alert">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v4m-1.637-9.409L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0zM12 16h.01"/></svg>
                <spam class="fs-5 align-items-center"><b>No hay recetas disponibles,</b> sube tu receta en la pestaña inicial.</spam>
              </div>
            {% endif %}
        </div>
    </div>
</section>


{% endblock %}

{% block links %}
{% endblock %}
