{% extends 'base.html' %}
{% block content %}
    <div class="upload">
        <button class="btn  btn-info" data-bs-toggle="modal" data-bs-target="#uploads">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 32 32"><path fill="currentColor" d="M16 4c-4.12 0-7.36 3.13-7.813 7.125a4.9 4.9 0 0 0-3.843 3.22C1.884 15.054 0 17.248 0 20c0 3.324 2.676 6 6 6h20c3.324 0 6-2.676 6-6c0-1.76-.855-3.336-2.094-4.438c-.232-3.514-3.035-6.318-6.562-6.5C22.14 6.133 19.378 4 16 4m0 2c2.762 0 4.97 1.77 5.75 4.28l.22.72H23c2.755 0 5 2.245 5 5v.5l.406.313A4.07 4.07 0 0 1 30 20c0 2.276-1.724 4-4 4H6c-2.276 0-4-1.724-4-4c0-2.02 1.45-3.588 3.28-3.906l.657-.125l.125-.658C6.362 13.964 7.556 13 9 13h1v-1c0-3.37 2.63-6 6-6m0 5.594l-.72.687l-4 4l1.44 1.44L15 15.437V22h2v-6.563l2.28 2.282l1.44-1.44l-4-4z"/></svg>
        </button>
    </div>

    <section class="col-lg-6">
        <div class="container mt-5 ms-5">
            <form action="d-flex row">
                <label for="exampleSearch" class="form-label fs-3">Buscar X Ingredientes</label>
                <div class="mb-3 d-flex gap-2">
                    <input type="text" class="form-control w-50" id="exampleSearch" placeholder="Ejemplo: Pollo, Arroz, Leche">
                    <button type="submit" class="btn btn-primary ">Buscar</button>
                </div>
            </form>

            <!-- Sección "Recetas Filtradas" -->
            <div class="row mt-5 pt-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title fs-4">Receta 1</h5>
                            <hr>
                            <p class="card-text">Ingredientes </p>
                            <a href="#" class="btn btn-sm btn-success">Ver Receta</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title fs-4">Receta 2</h5>
                            <hr>
                            <p class="card-text">Descripción de la receta 2</p>
                            <a href="#" class="btn btn-sm btn-success">Ver Receta</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title fs-4">Receta 3</h5>
                            <hr>
                            <p class="card-text">Descripción de la receta 3</p>
                            <a href="#" class="btn btn-sm btn-success">Ver Receta</a>
                        </div>
                    </div>
                </div>
                    

            </div>

        </div>
    </section>

    <section class="col-lg-5 mt-5 ">
        <!-- Sección "ChatBot Recetas" -->
        <h2 class="chatbot-title">¿Qué se te antoja hoy?</h2>
        <div class="card">
            <div class="card-body rounded-1" id="chatBox">
                <div>
                    <p class="d-flex flex-row align-items-center text-center gap-2"><span><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 48 48"><ellipse cx="24" cy="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" rx="9.636" ry="20.5"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M28.818 15.655c9.805 5.66 15.597 13.986 12.936 18.595s-12.767 3.756-22.572-1.905S3.586 18.36 6.247 13.75c1.064-1.843 3.318-2.812 6.267-2.95c4.427-.208 10.42 1.457 16.304 4.855"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M28.818 32.345c-9.805 5.661-19.91 6.514-22.571 1.905s3.13-12.934 12.935-18.595c5.662-3.27 11.424-4.935 15.795-4.871c3.198.046 5.652 1.018 6.777 2.966c2.66 4.609-3.13 12.934-12.936 18.595M20.43 21.251h7.14M19.314 24h9.372m-6.745 2.749h4.118"/></svg></span> Hola, ¿en qué puedo ayudarte?</p>
                </div>
            </div>
        </div>
        <div class="bg-light mt-2 rounded-3">
            <form id="chatForm">
                <div class="input-group p-3">
                    <input type="text" class="form-control" id="chatInput" name="chatInput" placeholder="Escribe un mensaje...">
                    <button class="btn btn-primary" type="submit">Enviar</button>
                </div>
            </form>
        </div>


    </section>

    <!-- Modal de subida de archivos -->
    <div class="modal fade" id="uploads" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Subir Archivos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex justify-content-center">
                    <form action="{{url_for('upload_file')}}" method="post" enctype="multipart/form-data">
                        <input type="file" name="file" id="file" class="form-control" accept=".pdf">
                        <button type="submit" class="btn btn-primary mt-3">Subir</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block links %}
    <style>

        .upload {
            display: flex;
            justify-content: center;
            margin-top: -30px;
        }
        
        .card {
            background-color: rgba(205, 185, 185, 0.427);
        }

        .chatbot-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #343a40;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        
        #chatBox {
            max-height: 55vh;
            overflow-y: auto;
            background-color: #f3f3f3;
        }

        /* Estilo de los mensajes */
        #chatBox p {
            margin: 10px 0;
        }

        #chatForm {
            width: 100%;
        }

        .user{
            text-align: right;
        }
        
        .user p{
            padding: 8px;
            background-color: #f8f8f8;
            width: fit-content;
        }


        /* Mejora visual para dispositivos móviles */
        @media (max-width: 768px) {
            .col-md-8 {
                max-width: 90%;
            }

            #chatBox {
                height: 50vh;
            }
        }
    </style>
    <script src="{{url_for('static', filename='js/funciones.js')}}"></script>
{% endblock %}

